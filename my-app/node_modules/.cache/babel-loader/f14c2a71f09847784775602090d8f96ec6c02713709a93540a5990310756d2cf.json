{"ast":null,"code":"var _jsxFileName = \"/Users/jenishmanandhar/djangoapi/my-app/src/pages/Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport Profile from \"./Profile\";\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [form, setForm] = useState({\n    username: '',\n    password: ''\n  });\n  const [error, setError] = useState(null);\n  const [pending, setPending] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    if (localStorage.token) {\n      history.push('/profile');\n    }\n  }, [history]);\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const validateForm = () => {\n    if (!form.username) {\n      return 'Username required';\n    }\n    if (!form.password) {\n      return 'Password required';\n    }\n    return null;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const errors = validateForm();\n    if (errors) {\n      setError(errors);\n      return;\n    }\n    try {\n      setPending(true);\n      setError(null);\n      const response = await loginUser(form);\n      localStorage.token = response.data.token;\n      history.push('/profile');\n    } catch (err) {\n      setError('Invalid credentials');\n    } finally {\n      setPending(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"Username\",\n          value: formData.username,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          value: formData.password,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"link-btn\",\n        onClick: () => props.onFormSwitch('register'),\n        children: \"Don't have an account? Signup here.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"4TviHOP22yFmCnMbATPwdV+2HRs=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\n;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","axios","Profile","useHistory","jsxDEV","_jsxDEV","Login","_s","form","setForm","username","password","error","setError","pending","setPending","history","localStorage","token","push","handleChange","e","target","name","value","validateForm","handleSubmit","preventDefault","errors","response","loginUser","data","err","children","className","onSubmit","type","placeholder","formData","onChange","fileName","_jsxFileName","lineNumber","columnNumber","errorMessage","onClick","props","onFormSwitch","_c","$RefreshReg$"],"sources":["/Users/jenishmanandhar/djangoapi/my-app/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport Profile from \"./Profile\";\nimport { useHistory } from 'react-router-dom';\n\nfunction Login() {\n  const [form, setForm] = useState({ \n    username: '',\n    password: '' \n  });\n\n  const [error, setError] = useState(null);\n  const [pending, setPending] = useState(false);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    if(localStorage.token) {\n      history.push('/profile');\n    }\n  }, [history]);\n\n  const handleChange = (e) => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const validateForm = () => {\n    if (!form.username) {\n      return 'Username required';\n    }\n    \n    if (!form.password) {\n      return 'Password required';\n    }\n\n    return null;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    const errors = validateForm();\n    if(errors) {\n      setError(errors);\n      return;\n    }\n\n    try {\n      setPending(true);\n      setError(null);\n\n      const response = await loginUser(form);\n\n      localStorage.token = response.data.token;\n\n      history.push('/profile');\n    } catch (err) {\n      setError('Invalid credentials');\n    } finally {\n      setPending(false); \n    }\n\n  };\n\n  return (\n    <div>\n      <div className=\"auth-form-container\">\n        <form className=\"login-form\" onSubmit={handleSubmit}>\n          <input type=\"text\" name=\"username\" placeholder=\"Username\" value={formData.username} onChange={handleChange} />\n          <br></br>\n          <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} />\n          <br></br>\n          <button type=\"submit\">Login</button>\n          {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\n        </form>\n        <br></br>\n        <button className=\"link-btn\" onClick={() => props.onFormSwitch('register')}>Don't have an account? Signup here.</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}