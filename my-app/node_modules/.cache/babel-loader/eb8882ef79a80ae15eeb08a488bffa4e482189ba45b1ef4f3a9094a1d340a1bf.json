{"ast":null,"code":"import React,{useState}from\"react\";import axios from'axios';import HomePage from\"./Home\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=props=>{const[formData,setFormData]=useState({username:'',password:''});const[errorMessage,setErrorMessage]=useState('');const[loggedIn,setLoggedIn]=useState(false);const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleSubmit=e=>{e.preventDefault();const config={method:'post',url:'http://127.0.0.1:8000/auth/api/login/',headers:{'Content-Type':'application/json'},data:formData};axios.request(config).then(response=>{console.log('Login successful:',response.data);setErrorMessage('');setLoggedIn(true);}).catch(error=>{console.error('Login failed:',error);if(error.response){console.log('Response data:',error.response.data);console.log('Response status:',error.response.status);console.log('Response headers:',error.response.headers);setErrorMessage(error.response.data.detail||'An error occurred during login.');}else{setErrorMessage(error.message);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[!loggedIn?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",value:formData.username,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage})]}):/*#__PURE__*/_jsx(HomePage,{}),/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>props.onFormSwitch('register'),children:\"Don't have an account? Signup here.\"})]});};export default Login;","map":{"version":3,"names":["React","useState","axios","HomePage","jsx","_jsx","jsxs","_jsxs","Login","props","formData","setFormData","username","password","errorMessage","setErrorMessage","loggedIn","setLoggedIn","handleChange","e","name","value","target","handleSubmit","preventDefault","config","method","url","headers","data","request","then","response","console","log","catch","error","status","detail","message","children","className","onSubmit","type","placeholder","onChange","onClick","onFormSwitch"],"sources":["/Users/jenishmanandhar/djangoapi/my-app/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from 'axios';\nimport HomePage from \"./Home\";\n\nconst Login = (props) => {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const [errorMessage, setErrorMessage] = useState('');\n  const [loggedIn, setLoggedIn] = useState(false);\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    setFormData({ ...formData, [name]: value })\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    const config = {\n      method: 'post',\n      url: 'http://127.0.0.1:8000/auth/api/login/',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      data: formData\n    };\n\n    axios.request(config)\n    .then((response) => {\n      console.log('Login successful:', response.data)\n      setErrorMessage('')\n      setLoggedIn(true);\n    })\n    .catch((error) => {\n      console.error('Login failed:', error)\n      if (error.response) {\n        console.log('Response data:', error.response.data)\n        console.log('Response status:', error.response.status)\n        console.log('Response headers:', error.response.headers)\n        setErrorMessage(error.response.data.detail || 'An error occurred during login.')\n      } else {\n        setErrorMessage(error.message)\n      }\n    });\n  };\n\n  return (\n<div>\n      {!loggedIn ? ( \n        <div>\n          <form className=\"login-form\" onSubmit={handleSubmit}>\n            <input type=\"text\" name=\"username\" placeholder=\"Username\" value={formData.username} onChange={handleChange} />\n            <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} />\n            <button type=\"submit\">Login</button>\n          </form>\n          {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\n        </div>\n      ) : (\n        <HomePage />\n      )}\n      <button className=\"link-btn\" onClick={() => props.onFormSwitch('register')}>Don't have an account? Signup here.</button>\n    </div>\n      \n      \n  );\n};\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}